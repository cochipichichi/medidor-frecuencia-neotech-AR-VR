:root {
  --bg: #0f172a;
  --card: #1f2937;
  --text: #e2e8f0;
  --accent: #38bdf8;
  --csv: #22c55e;
  --font-base: 16px;
}
body {margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;font-size:var(--font-base);}
.topbar {background:rgba(15,23,42,.85);display:flex;justify-content:space-between;align-items:center;padding:.6rem 1rem;position:sticky;top:0;z-index:10;}
.logo {font-weight:700;}
.controls {display:flex;gap:.35rem;}
.controls button {background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);border-radius:999px;width:36px;height:32px;display:grid;place-items:center;cursor:pointer;}
.container {max-width:1100px;margin:1rem auto;padding:0 1rem 2rem;display:flex;flex-direction:column;gap:1rem;}
.panel,.graph-card,.history-card {background:var(--card);border-radius:1rem;padding:1rem;}
.btn-row {display:flex;gap:.6rem;flex-wrap:wrap;margin-top:.6rem;}
.primary {background:var(--accent);border:none;color:#0f172a;padding:.45rem 1.1rem;border-radius:.7rem;cursor:pointer;}
.secondary {background:transparent;border:1px solid rgba(226,232,240,.12);color:inherit;padding:.45rem 1.1rem;border-radius:.7rem;cursor:pointer;}
.csv {background:var(--csv);border:none;color:#0f172a;padding:.45rem 1.1rem;border-radius:.7rem;cursor:pointer;}
.device-row {margin-top:.6rem;display:flex;gap:.6rem;flex-wrap:wrap;align-items:center;}
.device-row select {background:rgba(2,6,23,.35);border:1px solid rgba(148,163,184,.25);color:inherit;border-radius:.4rem;padding:.3rem .5rem;}
.level-row {margin-top:.6rem;display:flex;gap:.5rem;align-items:center;flex-wrap:wrap;}
.level-bar {width:200px;height:10px;background:rgba(148,163,184,0.12);border-radius:999px;overflow:hidden;}
#level-fill {height:100%;width:0%;background:linear-gradient(90deg,#22c55e,#f97316,#ef4444);}
#level-text {font-size:.7rem;opacity:.75;}
.freq-wrapper {display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:1rem;}
.freq-display {background:radial-gradient(circle at top,rgba(56,189,248,.18),#0f172a 42%);border:1px solid rgba(148,163,184,.12);border-radius:1rem;padding:1rem;}
.freq-display.max {background:radial-gradient(circle at top,rgba(34,197,94,.18),#0f172a 42%);}
#freq-value,#freq-max,#freq-samples {font-size:2.6rem;font-weight:700;margin-top:.4rem;}
.note-value {font-size:1.2rem;opacity:.8;margin-top:.2rem;}
canvas {background:#020617;border-radius:.5rem;width:100%;}
.scene3d {width:100%;height:320px;background:#020617;display:flex;align-items:center;justify-content:center;border-radius:.5rem;}
.fallback {opacity:.6;font-size:.7rem;}
table {width:100%;border-collapse:collapse;font-size:.75rem;}
th,td {border-bottom:1px solid rgba(148,163,184,.12);padding:.25rem .3rem;}
.collapsible .help-toggle {background:rgba(255,255,255,0.03);border:1px solid rgba(226,232,240,.05);border-radius:.5rem;padding:.4rem .6rem;color:inherit;cursor:pointer;}
.help-content {margin-top:.5rem;font-size:.82rem;line-height:1.4;}
.help-content.hidden {display:none;}
.search-overlay {position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;justify-content:center;align-items:center;z-index:50;}
.search-overlay.show {display:flex;}
.search-box {background:var(--card);padding:1rem;border-radius:1rem;width:min(90%,400px);}
.footer {text-align:center;padding:1.2rem 0 1.5rem;font-size:.75rem;opacity:.65;}

.xr-panel{
  background: rgba(5,5,5,.12);
  border: 1px solid rgba(255,255,255,.03);
  border-radius: .8rem;
  padding: .8rem 1rem;
  margin-top: 1rem;
}
.xr-buttons{ display:flex; gap:.5rem; align-items:center; flex-wrap:wrap;}
.xr-btn{
  background:#312e81;
  color:white;
  border:none;
  padding:.45rem .9rem;
  border-radius:.5rem;
  cursor:pointer;
}
.xr-status{
  font-size:.75rem;
  opacity:.7;
}
